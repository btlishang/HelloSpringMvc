var initRoomDetail=function(){$(".room-teachers").longSlide({effect:"left",prev:".teacherPrev",next:".teacherNext",auto:!1,navi:!1}),$(".room-tabs").longTab({event:"click",tab:"div",content:".room-box .tab-box",hash:!0}),$(".room-course").children().eq(0).addClass("open"),$(".room-course .course-head").on("click",function(){$(this).toggleClass("open")}),$(".affice-box").on("click",function(){var o=$(".affice-content").html();$.longAlert({title:"公告",msg:o,textalign:"left",type:"alert",width:"600"})});var o=$(".rm-right").height();$("#main-box").css("min-height",o-96+"px")},roomIntroVideo={show:function(){$(".room-video-window").show(),videojs("intro-video").play()},hide:function(){$(".room-video-window").hide(),videojs("intro-video").pause()}},roomQA={add:function(o){var e=$(o).val();$.trim(e).length<1?$.longAlert({msg:"请输入问题",type:"alert"}):console.log("添加提问成功")},reAdd:function(o){var e=$("#question"+o),t='<div class="re-form"><input type="text" class="re-input" placeholder="输入回答" />\n<button class="re-btn" onclick="roomQA.reSave('+o+')">回答</button>\n<button class="re-btn2" onclick="roomQA.reCanel('+o+')">取消</button></div>';e.find(".add").hide(),e.find(".cont").append(t)},reSave:function(o){var e=$("#question"+o),t=e.val();$.trim(t).length<1?$.longAlert({msg:"请输入问题",type:"alert"}):(e.find(".re-form").remove(),console.log("添加回答成功"))},reCanel:function(o){var e=$("#question"+o);e.find(".add").show(),e.find(".re-form").remove(),console.log("回答取消")},reDel:function(o){$.longAlert({msg:"确认要删除吗？",type:"confirm",confirm:{submitevent:function(){console.log("删除")}}})}},roomJoinin=function(){$.longAlert({msg:'<div class="room-join-alert"><i></i>加入成功</div>',type:"alert",width:"360"})},roomGift={show:function(o){var e={};e.classroomid=o,$.ajax({type:"GET",url:"/classroom/giftlist",dataType:"json",data:e,success:function(i){if(console.log(i),0==i.code){var o=i.data,e="";e+='<div class="room-gift">';for(var t=0;t<o.length;t++)e+='<div class="gift-item" data-id="'+o[t].giftid+'" data-price="'+o[t].price+'" onclick="roomGift.select(this)"><div class="inner"><img src="'+o[t].picurl+'" class="pic"><div class="name">'+o[t].title+'</div><div class="num">'+o[t].price+"龙币</div></div></div>";e+='<div class="longbi">我的龙币数量：<strong id="mymoney">'+i.expandData.totalmoney+'</strong><a href="'+WEB_SERVICE_URL+'/usercenter/recharge" target="_blank" id="topay">充值</a></div>',e+='<input type="hidden" id="select-giftid"/><input type="hidden" id="select-giftprice"/></div>',$.longAlert({title:"送礼物",msg:e,width:"750",textalign:"left",type:"confirm",confirm:{submitlabel:"赠送",submitevent:function(){var o=$("#select-giftid").val(),e=$("#mymoney").text();if(o.length<1)return alert("请选择一个礼物"),!1;var t=$("#select-giftprice").val();if(parseInt(e)<parseInt(t))return alert("你的龙币不足，请先去钱包中充值。"),!1;roomGift.givegift(o,""+i.expandData.touid,""+i.expandData.classroomid)}}})}else $.longAlert({msg:i.rtnInfo})},error:function(o,e){window.location.href="/login"}})},select:function(o){var e=$(o).data("id"),t=$(o).data("price");$(o).addClass("active").siblings().removeClass("active"),$("#select-giftid").val(e),$("#select-giftprice").val(t)},givegift:function(o,e,t){var i={};i.giftid=o,i.touid=""+e,i.classroomid=""+t,$.ajax({type:"GET",url:"/classroom/givegift",dataType:"json",data:i,success:function(o){$.longAlert({msg:"操作成功"}),window.location.reload()},error:function(o,e){window.location.href="/login"}})}},roomGiftList=function(o){var e={};e.classroomid=o,$.ajax({type:"GET",url:"/classroom/selectLiveGift",dataType:"json",data:e,success:function(o){if(console.log(o),0==o.code){var e="",t=o.data;if(t&&0!=t.length){e+='<div class="room-giftlist">';for(var i=0;i<t.length;i++)e+='<div class="gift-item" data-id="'+i+'"><div class="inner"><img src="'+t[i].picurl+'" class="pic"><div class="name">'+t[i].gifttitle+'</div><div class="num">获得 '+t[i].num+" 个</div></div></div>";e+="</div>"}else e='<div style="text-align: center;">暂未收到礼物</div>';$.longAlert({title:"收到的礼物",msg:e,width:"750"})}else $.longAlert({msg:o.rtnInfo})},error:function(o){window.location.href="/login"}})},roomFollow={on:function(o){var e={};e.classroomid=o,$.ajax({type:"GET",url:"/classroom/insertUserBusinessConcern",dataType:"json",data:e,success:function(o){0==o.code?$.longAlert({msg:"关注成功",alert:{alertevent:function(){window.location.reload()}}}):$.longAlert({msg:o.rtnInfo})},error:function(o,e){window.location.href="/login"}})},off:function(o){var e={};e.classroomid=o,$.ajax({type:"GET",url:"/classroom/removeUserBusinessConcern",dataType:"json",data:e,success:function(o){0==o.code?$.longAlert({msg:"操作成功",alert:{alertevent:function(){window.location.reload()}}}):$.longAlert({msg:o.rtnInfo})},error:function(o,e){window.location.href="/login"}})}};