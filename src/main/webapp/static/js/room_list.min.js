var getListData={init:function(r,e,a){var l,o=0,s=a||8;switch((e=JSON.parse(e)).pageSize=s,r){case"classroom":l="/roomModel/selectClassroomList";break;case"livevideo":l="/roomModel/coursesModeldetailsList";break;case"diy":l="/roomModel/zdyModeldetailsList";break;case"teacher":l="/roomModel/teacherModeldetailsList";break;case"search":l="/roomModel/selectRoomSearch"}$("#page-itemlist").dropload({scrollArea:window,distance:0,threshold:200,loadDownFn:function(s){var a="";o++,e.startNo=o,$.ajax({type:"GET",url:l,dataType:"json",data:e,success:function(e){console.log(e),0==e.code&&0<e.data.list.length?a="livevideo"==r?getListData.livevideo(e.data.list):"teacher"==r?getListData.teacher(e.data.list):getListData.classroom(e.data.list):(s.lock(),s.noData()),$("#item-lists").append(a),s.resetload()},error:function(e,a){console.log("网络连接错误"),s.resetload()}})}})},classroom:function(e){for(var a,s='<div class="room-card">\n          <div class="room-pic">\n              <a href="{url}"><img src="{pic}" alt="{title}" width="100%" class="pic" onerror="this.src=\'/img/room.png\'" /></a>\n          </div>\n          <div class="room-title">\n              <a href="{url}">{title}</a>\n          </div>\n          <div class="room-info">{name}&nbsp;</div>\n          <div class="room-nums">\n              {charge}\n              {num}人学习\n          </div>\n      </div>',r="",l=0;l<e.length;l++)a=(a=(a=(a=(a=s.replace(/\{url}/g,webpath+"/classroom/detail?classroomid="+e[l].classroomid)).replace(/\{pic}/g,osspic(ossurl+e[l].classphotos,320,180))).replace(/\{title}/g,e[l].classtitle)).replace(/\{name}/g,e[l].displayname)).replace(/\{num}/g,e[l].classinvoloed),0==e[l].isfree&&(a=a.replace(/\{charge}/g,'<span class="room-price free">免费</span>')),1==e[l].isfree&&(a=a.replace(/\{charge}/g,'<span class="room-price">'+e[l].charge+"<small> 龙币</small></span>")),r+=a;return r},livevideo:function(e){for(var a='<div class="room-card room-livetv">\n<div class="room-state">{state}</div>\n<div class="room-pic">\n<a href="{url}">\n<img src="{pic}" alt="{title}" width="100%" class="pic" onerror="this.src=\'/img/livetv.png\'">\n<span class="date">{date}</span>\n</a>\n</div>\n<div class="room-title"><a href="{url}">{title}</a></div>\n<div class="room-info">教室：<a href="{url}">{roomname}</a></div>{charge}</div>',s="",r=0;r<e.length;r++){var l=e[r].isfree,o=e[r].liveCourses[0],i=o.status,t="";if(i<2){var c=o.starttime,n=o.endtime,d=new Date(c).getMonth()+1,m=new Date(c).getDate(),p=new Date(c).getHours(),v=new Date(c).getMinutes(),g=new Date(n).getHours(),u=new Date(n).getMinutes();t=d+"月"+m+"日 "+(p=p<10?"0"+p:p)+":"+(v=v<10?"0"+v:v)+" - "+(g=g<10?"0"+g:g)+":"+(u=u<10?"0"+u:u)}var h=1==i?webpath+"/classroom/livevideo?classroomid="+e[r].classroomid+"&courseid="+o.id:webpath+"/classroom/detail?classroomid="+e[r].classroomid+"&courseid="+o.id+"#livetv",f=0==l?'<span class="room-price free">免费</span>':'<span class="room-price">'+e[r].charge+"<small> 龙币</small></span>";s+=a.replace(/\{state}/g,liveState(i)).replace(/\{roomname}/g,e[r].classtitle).replace(/\{date}/g,t).replace(/\{pic}/g,osspic(ossurl+o.pickey,320,240)).replace(/\{title}/g,o.coursetitle).replace(/\{url}/g,h).replace(/\{charge}/g,f)}return s},teacher:function(e){for(var a='<div class="company-card">\n        <div class="pic">\n            <img src="{avatar}" alt="{name}" width="100%" class="pic" onerror="this.src=\'/img/square.png\'" />\n        </div>\n        <div class="title">{name}</div>\n        <div class="info">{info}</div>\n        <div class="nums">\n            <span>{courses}节课</span>\n            <span>{num}人学习</span>\n        </div>\n        <div class="comm">\n            推荐教室：\n            <a href="{classurl}">{classtitle}</a>\n        </div>\n    </div>',s="",r=0;r<e.length;r++)s+=a.replace(/\{name}/g,e[r].nickname).replace(/\{avatar}/g,osspic(ossurl+e[r].avatar,200,200)).replace(/\{info}/g,e[r].brief).replace(/\{courses}/g,e[r].courses).replace(/\{num}/g,e[r].classinvoloed).replace(/\{classtitle}/g,e[r].classtitle).replace(/\{classurl}/g,webpath+"/classroom/detail?classroomid="+e[r].classroomid);return s}},liveState=function(e){return["直播预告","正在直播","直播结束","观看回放"][e||0]};